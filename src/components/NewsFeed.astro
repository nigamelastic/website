---
import NewsCard from './NewsCard.astro';
import { fetchNewsFeeds, type NewsItem } from '../utils/news-feed';

let news: NewsItem[] = [];

try {
  news = await fetchNewsFeeds();
} catch (error) {
  console.error('Failed to fetch news feeds:', error);
}
---

<div class="not-prose my-12">
  {news.map((item: NewsItem, index: number) => (
    <>
      {index > 0 && (
        <div style="margin: 3rem 0;">
          <div style="height: 2px; background: linear-gradient(to right, transparent, rgb(139, 92, 246), transparent);"></div>
        </div>
      )}
      <NewsCard {...item} />
    </>
  ))}
  
  {news.length === 0 && (
    <div class="text-center py-20 bg-violet-50 dark:bg-violet-950/30 rounded-2xl border-2 border-dashed border-violet-300 dark:border-violet-700">
      <p class="text-slate-600 dark:text-slate-400 text-lg">No news updates found at the moment. Please check back later.</p>
    </div>
  )}
</div>
